
( 4 TO HEADER)
0 VALUE MH
: SWAPH HERE MH TO HERE TO MH ;
 ( PLACE FOR "C"-STYLE STRING "LENGTH" PROCEDURE )
M: DUP BEGIN COUNT ~UNTIL 1- OVER - ;M
M: TO MH AT MACROS ! ;M
M: AT MACROS @ MH ;M
HEADER MAC , , ,              C" ; STACK> MAC:
( 1 TO HEADER)
: MAC> CREATE AT MAC: @ WORD COUNT STR, 1Z, IMMEDIATE
       DOES>  EVAL ;
: >MAC SWAPH CURRENT PUSH TO MACROS EXEC POP TO CURRENT SWAPH ;
          M: ['] MAC> >MAC ;M

' MAC: !
: ?MAC ' 2+ AT MAC TYPE ;
M: AT MAC: @ [',] C" AT MAC: ! MAC: AT MAC: ! ;M
' MAC: 2+ !
: -MAC  0 MPTR TO MAC ;     -MAC

