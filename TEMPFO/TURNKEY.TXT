
  MARKER -START

: 'INIT EMPTY-BUFFERS -USE 0" 4TH.SCR"
  1+ TO FOPEN TO SCRH F83 SIO
 256 DUP AT ON; TO !  MPTR DUP  TO MTOP TO SPTR
   0. "PUSH  0. "PUSH      -START
   BEGIN HANDLES WHILE AT HANDLES DROP REPEAT
   -MAC  0  TO  INITW  F83 1 LOAD ;

 ' 'INIT  TO INITW

 CREATE BUFF   300  ALLOT

 DOS COPY WHERE.TXT AOUT.COM >NUL
 USING AOUT.COM

: FSAVE  -MAC BLK PUSH >IN PUSH
  0 TO BLK   0 TO >IN
  -1 ORIGIN+ STR U0 -ROT   CMOVE
  POP TO >IN  POP TO BLK
  256 HERE OVER - 1K / 1+ 0  DO
    DUP I BLOCK 1K CMOVE  UPDATE   1K +
  LOOP FLUSH -USE ;

 ' FSAVE TO CSP

 FORGET BUFF
 CSP EXEC

